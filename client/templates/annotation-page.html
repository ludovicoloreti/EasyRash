<div id="background-image"></div>

<div id="article-page">
  <div class="container">
    <div class="row">
      <div  class="col-lg-4">
        <div>
          <div id="doc-list" class="animated fadeInDown" >
            <h3>You can review: </h3>
            <div class="list-group">
              <a ng-repeat="sub in submissions" ng-href="/#/annotation-page/{{sub.url.replace('.html', '')}}" class="list-group-item">
                {{sub.title | cut:true:50:' ...'}}
              </a>
            </div>
          </div>
          <div id="meta-list" class="animated fadeInLeft">
            <h3>Metadata: </h3>
            <div class="list-group">
              <div class="list-group-item" ng-repeat="comment in commentsList">
                <!-- ng-mouseover="showSelection($index)" ng-mouseout="hideSelection($index)" -->
                <p class="card-text"><i>"{{comment.text | cut:true:100:' ...'}}"</i></p>
                <p class="small text-muted"><a ng-href="{{comment.author}}">{{comment.author.replace("mailto:","")}}</a> on {{comment.date | date :  mediumDate}}</p>
                <span class="label label-primary">{{comment["@type"]}}</span>
              </div>
            </div>

            <div ng-if="commentsList.length == 0" class="animated fadeInLeft text-center vertical-offset-70">
              <span class="fa fa-paperclip fa-3x"></span>
              <h4 class="">No metadata...</h4>
            </div>
          </div>
        </div>
      </div>

      <!-- Start error alert -->
      <div ng-if="error" class="alert alert-danger alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <strong>Error: </strong> {{message}}
      </div><!--  End error alert -->

      <div id="toolkit">
        <div class="btn-group pull-md-right">
          <button class="btn btn-secondary" title="Annotator mode" ng-click="loadRash()" uib-tooltip="Annotator mode" tooltip-placement="bottom" tooltip-append-to-body="true"><span class="fa fa-pencil"></span></button>
          <button class="btn btn-secondary" title="Evaluate" data-toggle="modal" data-target="#evaluate-article-modal" uib-tooltip="Evaluate article" tooltip-placement="bottom" tooltip-append-to-body="true"><span class="fa fa-check"></span></button>

          <button class="btn btn-secondary" title="Show comments" ng-click="showComments()" uib-tooltip="Show Comments" data-toggle="modal" data-target="#comment-list-modal" tooltip-placement="bottom" tooltip-append-to-body="true"><span class="fa fa-th-list"></span></button>
          <button class="btn btn-secondary" title="Highlight selection" ng-click="highlight()"  uib-tooltip="Highlight selection" tooltip-placement="bottom" tooltip-append-to-body="true"><span class="fa fa-sticky-note-o"></span></button>
          <button class="btn btn-secondary" title="Exit annotator mode" ng-click="exit()" uib-tooltip="Exit Annotator mode" tooltip-placement="bottom" tooltip-append-to-body="true"><span class="fa fa-remove"></span></button>
        </div>
      </div>

      <!-- START Right col -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 animated fadeInUp">
        <img id="spinner" src="img/loader.gif" class="img-responsive center-block" ng-show="loading" />
        <article id="article-container"
        class=""
        ng-bind-html="articleBody">
        </article>
      </div><!-- END Right col -->

      <!-- START Comment modal -->
      <div id="comment-modal" class="modal fade" role="dialog">
        <div class="modal-dialog" id="comment-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-body">
              <fieldset class="form-group">
                <textarea class="form-control" id="exampleTextarea" rows="2" placeholder="Insert your comment here." ng-model="commentText"></textarea>
              </fieldset>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal" ng-click="saveComment(commentText)">Save</button>
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal">Cancel</button>
            </div>
          </div>

        </div>
      </div><!-- END #comment-modal -->

      <!-- START #comment-list-modal modal -->
      <div id="comment-list-modal" class="modal fade  bd-example-modal-lg" role="dialog">
        <div class="modal-dialog modal-lg" id="comment-list-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-body">
              <table class="table table-hover" id="comments-table">
                <thead class="thead-inverse">
                  <tr><th>Fragment id</th><th>Comment id</th><th>Comment text</th><th>Date</th></tr>
                </thead>
                <tbody>
                  <tr ng-repeat="c in cs">
                    <td>{{v.value.ref}}</td>
                    <td>{{c.key}}</td>
                    <td>{{c.value.text}}</td>
                    <td>{{c.value.date | date: "MMMM dd 'at' H:mm"}}</td>
                  </tr>
                </tbody>
              </table>
              <div ng-if="!cs || cs.lenght == 0">
                <p class="text-center">No comments yet...</p>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal" ng-click="saveComment(text)">Save</button>
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal">Cancel</button>
            </div>
          </div>

        </div>
      </div><!-- END #comment-list-modal -->

      <!-- START #evaluate-article-modal -->
      <div id="evaluate-article-modal" class="modal fade" role="dialog">
        <div class="modal-dialog" id="evaluate-article-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-body">
              <h3>Vote this article</h3>
              <h2 id="rating-title">{{vote.current}} / {{vote.max}}</h2>
              <div id="rating-container" star-rating rating-value="vote.current" max="vote.max" on-rating-selected="getSelectedRating(rating)"></div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal" ng-click="saveComment(text)">Save</button>
              <button type="button" class="btn btn-secondary btn-sm pull-sm-right" data-dismiss="modal">Cancel</button>
            </div>
          </div>

        </div>
      </div><!-- END#evaluate-article-modal -->


    </div><!-- END .row -->
  </div><!-- END .container -->
</div><!-- END #article-page -->
